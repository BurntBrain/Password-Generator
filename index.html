<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Generator</title>
    <link rel="stylesheet" href="passwordStyle.css">
</head>
<body>
    <center><h1>Password Generator</h1></center>
    <center><h2>Your password is: </h2></center>
    <center><h1 id="outPass"> </h1></center>
    <br>

    <center><input type="text" placeholder="input desired length" id="userInputLength"></center>
    <br>
    <div id="inputStyle">
        <center>Lower Case Letters <input type="checkbox" id="cLettersCheck" checked></center>
        <center>Capital Letters <input type="checkbox" id="lLettersCheck"checked></center>
        <center>Numbers <input type="checkbox" id="numbersCheck" checked></center>
        <center>Punctuation <input type="checkbox" id="punctuationCheck" checked></center>
    </div>
    
    <br>
    <Center><button id="createButton">Create</button></Center>
    <a href="link"></a>
    
    <script>
        var letters = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'];
        var numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
        var characters = ['!', '"', '#', '$', '%', '&', "'", '(', ')', '*', '+', ',', '-', '.', '/', ':', ';', '<', '=', '>', '?', '@', '[', ']', '^', '_', '`', '{', '|', '}', '~'];
        var index = 0;
        
        var password = "";

        var randomNumber = Math.floor(Math.random()*4+1);

        createButton.addEventListener("click", function(){
            var inputLength = Number(document.getElementById("userInputLength").value);
            if (isNaN(document.getElementById("userInputLength")).value) {
                userInputLength.value="";
            } else {
                if (!Number(document.getElementById("userInputLength").value) % 1 === 0) {
                    document.getElementById("userInputLength").value = (Math.ceil(Number(document.getElementById("userInputLength").value)));
                }
                if (document.getElementById("cLettersCheck").checked || document.getElementById("lLettersCheck").checked || document.getElementById("numbersCheck").checked || document.getElementById("punctuationCheck").checked)  {
                    while (index < Number(document.getElementById("userInputLength").value)) {
                        randomNumber = Math.floor(Math.random()*4+1);
                        if (document.getElementById("cLettersCheck").checked && randomNumber == 1) {
                            password += (letters[Math.floor(Math.random() * letters.length)]);
                            index++;
                        } else if (document.getElementById("lLettersCheck").checked && randomNumber == 2) {
                            password += letters[Math.floor(Math.random() * letters.length)].toUpperCase();
                            index++;
                        } else if (document.getElementById("numbersCheck").checked && randomNumber == 3) {
                            password += String(numbers[Math.floor(Math.random() * numbers.length)]);
                            index++;
                        } else if (document.getElementById("punctuationCheck").checked && randomNumber == 4) {
                            password += (characters[Math.floor(Math.random() * characters.length)]);
                            index++;
                        }
        
                    }
                    index = 0;
                    }
            }

            if (password.length > 2000) {
                var element = document.createElement("a");
                element.setAttribute("href", 'data:text/plain;charset=utf-8,' + encodeURIComponent(password));
                element.setAttribute("download", "password.txt");
                document.body.appendChild(element);
                element.click();
                
                
            } else {
                document.getElementById("outPass").textContent=password;
            }
            console.log(password);
            password = "";
        });
        
    </script>
</body>
</html>
